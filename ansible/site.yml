---
- name: Provision Debian VM
  hosts: targets
  become: true

  tasks:
    - name: Validate selected apps
      ansible.builtin.assert:
        that:
          - item in ['docker', 'nginx']
        fail_msg: "Unbekannte App ausgew√§hlt: {{ item }}"
      loop: "{{ apps_selected | default([]) }}"

    - name: Run selected app roles
      ansible.builtin.include_role:
        name: "apps/{{ item }}"
      loop: "{{ apps_selected | default([]) }}"
